import axios from 'axios';

const api = axios.create({
    baseURL: 'https://alianzaepaecciledna.edu.gt/backend/api/v1', // Confirma que apunta a v1
    // withCredentials: true,
    
    // baseURL: 'http://localhost:8000/api/v1',
    // withCredentials: true, 
    headers: {
        'Accept': 'application/json',
        'X-Requested-With': 'XMLHttpRequest'
    }
});

api.interceptors.request.use(config => {
    // ¡OJO AQUÍ! Debe decir 'auth_token', no 'token' ni 'access_token'
    const token = localStorage.getItem('auth_token'); 
    
    if (token) {
        config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
});

export default api;